{% extends "the_olympus/_base.html" %} {% load static %} {% block content %}

<main class="panel-container">
  <div class="cards-container" style="justify-content: center;">
    <section class="card card--plan">
      <header class="card__header">
        {% if user.plan.name == "Premium" %}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          height="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="card__icon lucide lucide-circle-star-icon lucide-circle-star"
        >
          <path
            d="M11.051 7.616a1 1 0 0 1 1.909.024l.737 1.452a1 1 0 0 0 .737.535l1.634.256a1 1 0 0 1 .588 1.806l-1.172 1.168a1 1 0 0 0-.282.866l.259 1.613a1 1 0 0 1-1.541 1.134l-1.465-.75a1 1 0 0 0-.912 0l-1.465.75a1 1 0 0 1-1.539-1.133l.258-1.613a1 1 0 0 0-.282-.867l-1.156-1.152a1 1 0 0 1 .572-1.822l1.633-.256a1 1 0 0 0 .737-.535z"
          />
          <circle cx="12" cy="12" r="10" />
        </svg>
        {% endif %} {% if user.plan.name == "Standard" %}
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="32"
          height="32"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="card__icon lucide lucide-thumbs-up-icon lucide-thumbs-up"
        >
          <path
            d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z"
          />
          <path d="M7 10v12" />
        </svg>
        {% endif %}
        <h2 class="card__title">
          <span class="card__title-text">{{ user.plan.name }} plan</span>
          <span class="card__price">${{ user.plan.price }}</span>
        </h2>
      </header>
      <div class="card__body">

        <p class="card__info">
          You are currently subscribed to the {{ user.plan.name }} plan.
        </p>
      </div>
    </section>
  </div>

  <section class="plans" id="plans">
  <h2 class="section__title">Select Plan</h2>
  <div class="plans__plans-container">
    {% for plan in plans %}
    <div class="plans-container__plan-card">
      {% if plan.is_premium %}
      <span class="plan-card__badge">Best Value</span>
      {% endif %}

      <h3 class="plan-card__title">{{ plan.name }}</h3>
      <p class="plan-card__price">
        <span class="price__number">${{ plan.price }}</span> /month
      </p>
      <form method="post">
            {% csrf_token %}
          {% if current_plan and plan.id == current_plan.id %}
          <button type="button" class="button button--secondary" disabled style="width: 100%; opacity: 0.6; cursor: not-allowed;">
              Current Plan
            </button>
            {% else %}
            <button type="submit" name="plan_id" value="{{ plan.id }}" class="button button--primary clickable" style="width: 100%;">
              Select Plan
            </button>
            {% endif %}
        </form>
      <ul class="plan-card__features">
        {% for plan_feature in plan.features %}
        <li class="plan-card__feature">
          <span><img src="{% static 'the_olympus/icons/check.svg' %}" /></span>
          <span>{{ plan_feature }}</span>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
  </div>
  <div style="text-align: center; margin-top: 2rem;">
      <a href="{% url 'dashboard' %}" class="button button--secondary clickable">
        Back to Dashboard
      </a>
    </div>
</section>

</main>

{% endblock %}
